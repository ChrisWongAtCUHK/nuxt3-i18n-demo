import{h as k}from"./index.5afe666e.js";import{u as F}from"./asyncData.b70ea6c9.js";import{u as i,l as $,a3 as x}from"./entry.3187befc.js";function O(o,r,p){const[t={},c]=typeof r=="string"?[{},r]:[r,p],s=t.key||k([c,i(t.baseURL),typeof o=="string"?o:"",i(t.params||t.query)]);if(!s||typeof s!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+s);if(!o)throw new Error("[nuxt] [useFetch] request is missing.");const y=s===c?"$f"+s:s,a=$(()=>{let n=o;return typeof n=="function"&&(n=n()),i(n)});if(!t.baseURL&&typeof a.value=="string"&&a.value.startsWith("//"))throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:l,lazy:m,default:w,transform:b,pick:d,watch:f,immediate:g,...v}=t,u=x({...v,cache:typeof t.cache=="boolean"?void 0:t.cache}),_={server:l,lazy:m,default:w,transform:b,pick:d,immediate:g,watch:f===!1?[]:[u,a,...f||[]]};let e;return F(y,()=>{var h;return(h=e==null?void 0:e.abort)==null||h.call(e),e=typeof AbortController<"u"?new AbortController:{},typeof a.value=="string"&&a.value.startsWith("/"),(t.$fetch||globalThis.$fetch)(a.value,{signal:e.signal,...u})},_)}export{O as u};
